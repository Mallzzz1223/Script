-- Script GUI Terpadu untuk Fishing
-- Tempatkan di StarterPlayerScripts atau StarterGui sebagai LocalScript

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- ** Bagian 1: Pengaturan dan Animasi GUI **
local TweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out)

local function tweenGUI(guiFrame, visible)
    local targetAlpha = visible and 1 or 0
    local targetPosition = visible and UDim2.new(0.5, -250, 0.55, -175) or UDim2.new(0.5, -250, 0, -175)

    if visible then
        guiFrame.Visible = true
    end

    local tween = TweenService:Create(guiFrame, TweenInfo, {Position = targetPosition, BackgroundTransparency = 1 - targetAlpha})
    tween:Play()
    if not visible then
        tween.Completed:Wait()
        guiFrame.Visible = false
    end
end

-- ** Bagian 2: Membuat GUI Utama dan Tombol Toggle **
local MainScreenGui = Instance.new("ScreenGui")
MainScreenGui.Name = "FishItGUI"
MainScreenGui.Parent = PlayerGui

local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 500, 0, 350)
MainFrame.Position = UDim2.new(0.5, -250, 0.55, -175)
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.BorderSizePixel = 0
MainFrame.Visible = false
MainFrame.Parent = MainScreenGui

local FrameCorner = Instance.new("UICorner")
FrameCorner.CornerRadius = UDim.new(0, 12)
FrameCorner.Parent = MainFrame

-- Tombol Toggle di pojok kiri
local ToggleButton = Instance.new("TextButton")
ToggleButton.Name = "ToggleButton"
ToggleButton.Size = UDim2.new(0, 60, 0, 60)
ToggleButton.Position = UDim2.new(0.02, 0, 0.5, -30)
ToggleButton.AnchorPoint = Vector2.new(0, 0.5)
ToggleButton.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
ToggleButton.BorderSizePixel = 0
ToggleButton.Text = ""
ToggleButton.Parent = MainScreenGui

local ButtonCorner = Instance.new("UICorner")
ButtonCorner.CornerRadius = UDim.new(1, 0)
ButtonCorner.Parent = ToggleButton

local ButtonStroke = Instance.new("UIStroke")
ButtonStroke.Color = Color3.fromRGB(0, 120, 255)
ButtonStroke.Thickness = 2
ButtonStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
ButtonStroke.Parent = ToggleButton

local LogoIcon = Instance.new("ImageLabel")
LogoIcon.Name = "LogoIcon"
LogoIcon.Size = UDim2.new(0.6, 0, 0.6, 0)
LogoIcon.Position = UDim2.new(0.5, 0, 0.5, 0)
LogoIcon.AnchorPoint = Vector2.new(0.5, 0.5)
LogoIcon.Image = "rbxassetid://18182747185" -- Ganti dengan ID aset logo "MZ" kamu
LogoIcon.ImageColor3 = Color3.fromRGB(255, 255, 255)
LogoIcon.BackgroundTransparency = 1
LogoIcon.Parent = ToggleButton

-- ** Bagian 3: Konten Utama GUI **
local ContentLayout = Instance.new("UIListLayout")
ContentLayout.FillDirection = Enum.FillDirection.Horizontal
ContentLayout.Parent = MainFrame

local Sidebar = Instance.new("Frame")
Sidebar.Name = "Sidebar"
Sidebar.Size = UDim2.new(0.35, 0, 1, 0)
Sidebar.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Sidebar.BorderSizePixel = 0
Sidebar.Parent = MainFrame

local SidebarLayout = Instance.new("UIListLayout")
SidebarLayout.FillDirection = Enum.FillDirection.Vertical
SidebarLayout.Padding = UDim.new(0, 5)
SidebarLayout.Parent = Sidebar

local TopMenuFrame = Instance.new("Frame")
TopMenuFrame.Name = "TopMenuFrame"
TopMenuFrame.Size = UDim2.new(1, 0, 0.8, 0)
TopMenuFrame.BackgroundTransparency = 1
TopMenuFrame.Parent = Sidebar

local TopMenuLayout = Instance.new("UIListLayout")
TopMenuLayout.FillDirection = Enum.FillDirection.Vertical
TopMenuLayout.Padding = UDim.new(0, 5)
TopMenuLayout.Parent = TopMenuFrame

local function createMenuItem(name, iconId)
    local ItemButton = Instance.new("TextButton")
    ItemButton.Name = name .. "Button"
    ItemButton.Size = UDim2.new(1, 0, 0, 40)
    ItemButton.Text = ""
    ItemButton.BackgroundTransparency = 1
    ItemButton.Parent = TopMenuFrame

    local ItemLayout = Instance.new("UIListLayout")
    ItemLayout.FillDirection = Enum.FillDirection.Horizontal
    ItemLayout.VerticalAlignment = Enum.VerticalAlignment.Center
    ItemLayout.Padding = UDim.new(0, 10)
    ItemLayout.Parent = ItemButton

    local Icon = Instance.new("ImageLabel")
    Icon.Name = "Icon"
    Icon.Size = UDim2.new(0, 24, 0, 24)
    Icon.Image = iconId
    Icon.ImageColor3 = Color3.fromRGB(200, 200, 200)
    Icon.BackgroundTransparency = 1
    Icon.Parent = ItemButton

    local Text = Instance.new("TextLabel")
    Text.Name = "Text"
    Text.Size = UDim2.new(1, -40, 1, 0)
    Text.Text = name
    Text.TextColor3 = Color3.fromRGB(200, 200, 200)
    Text.Font = Enum.Font.SourceSansSemibold
    Text.TextSize = 16
    Text.BackgroundTransparency = 1
    Text.TextXAlignment = Enum.TextXAlignment.Left
    Text.Parent = ItemButton

    ItemButton.MouseEnter:Connect(function()
        ItemButton.BackgroundTransparency = 0.8
        ItemButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    end)
    ItemButton.MouseLeave:Connect(function()
        ItemButton.BackgroundTransparency = 1
    end)

    return ItemButton
end

local autoFishBtn = createMenuItem("Auto Fish", "rbxassetid://4630327376")
local playerBtn = createMenuItem("Player", "rbxassetid://3926307135")
local utilityBtn = createMenuItem("Utility", "rbxassetid://3926307270")
local settingsBtn = createMenuItem("Settings", "rbxassetid://3926307379")

-- Profile Area di Sidebar
local ProfileFrame = Instance.new("Frame")
ProfileFrame.Name = "ProfileFrame"
ProfileFrame.Size = UDim2.new(1, 0, 0, 60)
ProfileFrame.Position = UDim2.new(0, 0, 1, -60)
ProfileFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
ProfileFrame.BorderSizePixel = 0
ProfileFrame.Parent = Sidebar

local ProfileLayout = Instance.new("UIListLayout")
ProfileLayout.FillDirection = Enum.FillDirection.Horizontal
ProfileLayout.VerticalAlignment = Enum.VerticalAlignment.Center
ProfileLayout.Padding = UDim.new(0, 10)
ProfileLayout.Parent = ProfileFrame

local ProfileIcon = Instance.new("ImageLabel")
ProfileIcon.Name = "ProfileIcon"
ProfileIcon.Size = UDim2.new(0, 40, 0, 40)
ProfileIcon.Image = "rbxassetid://1347072049"
ProfileIcon.BackgroundTransparency = 1
ProfileIcon.Parent = ProfileFrame

local NameTagFrame = Instance.new("Frame")
NameTagFrame.Name = "NameTagFrame"
NameTagFrame.Size = UDim2.new(1, -50, 1, 0)
NameTagFrame.BackgroundTransparency = 1
NameTagFrame.Parent = ProfileFrame

local NameTagLayout = Instance.new("UIListLayout")
NameTagLayout.FillDirection = Enum.FillDirection.Vertical
NameTagLayout.Parent = NameTagFrame

local NameLabel = Instance.new("TextLabel")
NameLabel.Name = "NameLabel"
NameLabel.Size = UDim2.new(1, 0, 0, 20)
NameLabel.Text = LocalPlayer.Name
NameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
NameLabel.Font = Enum.Font.SourceSansSemibold
NameLabel.TextSize = 16
NameLabel.BackgroundTransparency = 1
NameLabel.TextXAlignment = Enum.TextXAlignment.Left
NameLabel.Parent = NameTagFrame

local TagLabel = Instance.new("TextLabel")
TagLabel.Name = "TagLabel"
TagLabel.Size = UDim2.new(1, 0, 0, 20)
TagLabel.Text = "@" .. LocalPlayer.Name:gsub(" ", ""):lower()
TagLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
TagLabel.Font = Enum.Font.SourceSansLight
TagLabel.TextSize = 14
TagLabel.BackgroundTransparency = 1
TagLabel.TextXAlignment = Enum.TextXAlignment.Left
TagLabel.Parent = NameTagFrame

-- Area Konten Utama
local MainContentArea = Instance.new("Frame")
MainContentArea.Name = "MainContentArea"
MainContentArea.Size = UDim2.new(0.65, 0, 1, 0)
MainContentArea.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainContentArea.BorderSizePixel = 0
MainContentArea.Parent = MainFrame

-- ** Bagian 4: Footer GUI (Status & Tombol Memancing) **
local FooterFrame = Instance.new("Frame")
FooterFrame.Name = "FooterFrame"
FooterFrame.Size = UDim2.new(1, 0, 0, 60)
FooterFrame.Position = UDim2.new(0, 0, 1, -60)
FooterFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
FooterFrame.BorderSizePixel = 0
FooterFrame.Parent = MainFrame

local FooterLayout = Instance.new("UIListLayout")
FooterLayout.FillDirection = Enum.FillDirection.Horizontal
FooterLayout.VerticalAlignment = Enum.VerticalAlignment.Center
FooterLayout.Padding = UDim.new(0, 10)
FooterLayout.Parent = FooterFrame

local StatusLabel = Instance.new("TextLabel")
StatusLabel.Name = "StatusLabel"
StatusLabel.Size = UDim2.new(0, 70, 0, 25)
StatusLabel.Text = "STABLE"
StatusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
StatusLabel.Font = Enum.Font.SourceSansBold
StatusLabel.TextSize = 14
StatusLabel.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
StatusLabel.BackgroundTransparency = 0
StatusLabel.Parent = FooterFrame

local StatusCorner = Instance.new("UICorner")
StatusCorner.CornerRadius = UDim.new(1, 0)
StatusCorner.Parent = StatusLabel

local TargetFishLabel = Instance.new("TextLabel")
TargetFishLabel.Name = "TargetFishLabel"
TargetFishLabel.Size = UDim2.new(0.4, 0, 1, 0)
TargetFishLabel.Text = "Ikan Malaikat Api" -- Placeholder nama ikan
TargetFishLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TargetFishLabel.Font = Enum.Font.SourceSansBold
TargetFishLabel.TextSize = 16
TargetFishLabel.BackgroundTransparency = 1
TargetFishLabel.Parent = FooterFrame

local FishImage = Instance.new("ImageLabel")
FishImage.Name = "FishImage"
FishImage.Size = UDim2.new(0, 50, 0, 50)
FishImage.Image = "rbxassetid://18182747185" -- Placeholder gambar ikan
FishImage.BackgroundTransparency = 1
FishImage.Parent = FooterFrame

local MemancingButton = Instance.new("TextButton")
MemancingButton.Name = "MemancingButton"
MemancingButton.Size = UDim2.new(0.3, 0, 0, 40)
MemancingButton.Text = "Memancing"
MemancingButton.Font = Enum.Font.SourceSansBold
MemancingButton.TextSize = 16
MemancingButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MemancingButton.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
MemancingButton.Parent = FooterFrame

local MemancingCorner = Instance.new("UICorner")
MemancingCorner.CornerRadius = UDim.new(0, 8)
MemancingCorner.Parent = MemancingButton

-- ** Bagian 5: Logika Fungsionalitas **
local autoFishEnabled = false
local autoClickerEnabled = false

ToggleButton.MouseButton1Click:Connect(function()
    tweenGUI(MainFrame, not MainFrame.Visible)
end)

MemancingButton.MouseButton1Click:Connect(function()
    autoFishEnabled = not autoFishEnabled
    if autoFishEnabled then
        MemancingButton.Text = "Stop Memancing"
        MemancingButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
        print("Mulai memancing otomatis...")
    else
        MemancingButton.Text = "Memancing"
        MemancingButton.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
        print("Berhenti memancing otomatis.")
    end
end)

-- Logika tambahan untuk Always Perfect dan Auto Clicker akan diletakkan di sini.
-- Misalnya, dalam loop game atau saat event tertentu terdeteksi.
-- Perlu diketahui, logika ini sangat bergantung pada cara kerja game memancing yang spesifik.
-- Contoh sederhana untuk auto-cast:
-- local castLoop = nil
-- if autoFishEnabled and not castLoop then
--     castLoop = coroutine.wrap(function()
--         while autoFishEnabled do
--             -- Kode untuk melempar pancing
--             -- Kode untuk menunggu pancing digigit
--             -- Kode untuk klik "perfect"
--             wait(5) -- Waktu tunggu
--         end
--     end)()
-- end

-- Perbaikan UI untuk sudut membulat secara universal
for _, obj in ipairs(MainScreenGui:GetDescendants()) do
    if obj:IsA("Frame") or obj:IsA("TextButton") or obj:IsA("ImageLabel") then
        local corner = obj:FindFirstChildOfClass("UICorner")
        if not corner then
            corner = Instance.new("UICorner")
            corner.Parent = obj
        end
        if obj.Name ~= "ToggleButton" and obj.Name ~= "StatusLabel" then
            corner.CornerRadius = UDim.new(0, 8)
        end
    end
end
